---
Title: "AKS Cluster Resource"
Description: |-
  Reading the AKS cluster resource managed by Tanzu Mission Control.
---

# AKS Cluster

The `tanzu-mission-control_akscluster` resource allows you to provision and
manage [Azure AKS](https://azure.microsoft.com/en-us/products/kubernetes-service) through Tanzu Mission Control.
It allows users to connect Tanzu Mission Control to their Microsoft Azure account and create, update/upgrade, and delete
AKS clusters and node pools.

## Provisioning an AKS Cluster

To use the **Tanzu Mission Control** for creating a new cluster, you must first log into Azure and set up an Azure AKS 
credential that allows VMware Tanzu Mission Control to connect to your Azure subscription and manage resources in your 
Azure account.


You must also have the appropriate permissions in Tanzu Mission Control:

- To provision a cluster, you must have `cluster.admin` permissions.

[aws-account]: https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/tanzumc-using/GUID-E4627693-7D1A-4914-A9DF-61E49F97FECC.html

[create-cluster]: https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/tanzumc-using/GUID-208B2A5A-AE08-4CE1-9DC0-EB573E4BA4A8.html?hWord=N4IghgNiBcIKIGkDKIC+Q

## Example Usage

```terraform
# Read Tanzu Mission Control Microsoft Azure AKS cluster : fetch cluster details
data "tanzu-mission-control_akscluster" "tf_aks_cluster" {
  credential_name = "test-aks-cred-name" // Required
  subscription    = "test-subscription-id" // Required
  resource_group = "test-resource-group"  // Required
  name            = "test-cluster-name"    // Required
}
```

<!-- schema generated by tfplugindocs -->

## Schema

### Required

- `credential_name` (String) Name of the AKS Credential in Tanzu Mission Control
- `subscription` (String) Azure subscription ID of cluster
- `resource_group` (String) Azure resource group of this cluster
- `name` (String) Name of cluster


### Optional

- `meta` (Block List, Max: 2) Metadata for the cluster
- `spec` (Block List, Max: 1) Spec for the cluster 

### Read-Only

- `id` (String) The ID of this resource.
- `admin_group_ids` (Block List of String) The ID of admins

<a id="nestedblock--meta"></a>

### Nested Schema for `meta`

Optional:

- `description` (String) Description of the resource
- `labels` (Map of String) Labels for the resource

Read-Only:

- `location` (String) Location of the resource
- `version` (String) Version of the resource

<a id="nestedblock--spec"></a>

### Nested Schema for `spec`

Required:

- `access_config` (Block List, Min: 1, Max: 3) AKS access config for the cluster control plane 
- `nodepool` (Block List, Min: 1) Nodepool definitions for the cluster 

Optional:

- `cluster_group` (String) Name of the cluster group to which this cluster belongs
- `proxy` (String) Optional proxy name is the name of the Proxy Config to be used for the cluster

<a id="nestedblock--spec--config"></a>

### Nested Schema for `spec.config`

Required:

- `kubernetes_version` (String) Kubernetes version of the cluster
- `location` (String) Location of the cluster 
- `SKU` (Block List, Min: 1, Max: 2) Azure SKU name and tier 

Optional:

- `api_server_access_config` (Block List, Max: 2) Kubernetes Network Config (
  see [below for nested schema](#nestedblock--spec--config--kubernetes_network_config))
- `linux_config` (Block List, Max: 2) Admin username
- `auto_upgrade_config` (Block List, Max: 1) Upgrade channel

Required:

- `ssh_keys` (Set of String) ssh keys used by the cluster 

Optional:

- `enable_rbac` (Boolean) Enable Role Based Access Control to Kubernetes APIs requests
- `disable_local_accounts` (Boolean) Disable local accounts 
- `aad_config` (Block List, Max: 3) Azure Active Directory configurations
- `enable_azure_rbac` (Boolean) Enable Role Based Access Control to Azure APIs requests

Required:

- `tier` (String) Azure SKU pricing tier for Kubernetes services

Optional:

- `managed` (Boolean) Enable API server logs
- `enable_private_cluster` (Boolean) Enable audit logs
- `enable_http_application_routing` (Boolean) Enable authenticator logs
- `enable_secret_rotation` (Boolean) Enable controller manager logs

### Nested Schema for `spec.nodepool`

Required:

- `name` (String) Name for the nodepool 
- `spec` (Block List, Min: 1, Max: 1) Spec for the node pool 
- `upgrade_config` (Block List, Min: 1, Max: 1) Upgrade config

<a id="nestedblock--spec--nodepool--info"></a>

### Nested Schema for `spec.nodepool.info`

Required:

- `mode` (String) Mode of the node pool
- `count` (Integer) Number of node pools

Optional:

- `description` (String) Description for the nodepool

<a id="nestedblock--spec--nodepool--spec"></a>

### Nested Schema for `spec.nodepool.spec`

Required:

- `role_arn` (String) ARN of the IAM role that provides permissions for the Kubernetes nodepool to make calls to AWS API
  operations, immutable
- `subnet_ids` (Set of String) Subnets required for the nodepool

Optional:

- `ami_info` (Block List, Max: 1) AMI info for the nodepool if AMI type is specified as CUSTOM (
  see [below for nested schema](#nestedblock--spec--nodepool--spec--ami_info))
- `ami_type` (String) AMI type, immutable
- `capacity_type` (String) Capacity Type
- `instance_types` (Set of String) Nodepool instance types, immutable
- `launch_template` (Block List, Max: 1) Launch template for the nodepool (
  see [below for nested schema](#nestedblock--spec--nodepool--spec--launch_template))
- `node_labels` (Map of String) Kubernetes node labels
- `remote_access` (Block List, Max: 1) Remote access to worker nodes, immutable (
  see [below for nested schema](#nestedblock--spec--nodepool--spec--remote_access))
- `root_disk_size` (Number) Root disk size in GiB, immutable
- `scaling_config` (Block List, Max: 1) Nodepool scaling config (
  see [below for nested schema](#nestedblock--spec--nodepool--spec--scaling_config))
- `tags` (Map of String) EKS specific tags
- `taints` (Block List) If specified, the node's taints (
  see [below for nested schema](#nestedblock--spec--nodepool--spec--taints))
- `update_config` (Block List, Max: 1) Update config for the nodepool (
  see [below for nested schema](#nestedblock--spec--nodepool--spec--update_config))

<a id="nestedblock--spec--nodepool--spec--ami_info"></a>

### Nested Schema for `spec.nodepool.spec.ami_info`

Optional:

- `ami_id` (String) ID of the AMI to be used
- `override_bootstrap_cmd` (String) Override bootstrap command for the custom AMI

<a id="nestedblock--spec--nodepool--spec--launch_template"></a>

### Nested Schema for `spec.nodepool.spec.launch_template`

Optional:

- `id` (String) The ID of the launch template
- `name` (String) The name of the launch template
- `version` (String) The version of the launch template to use

<a id="nestedblock--spec--nodepool--spec--remote_access"></a>

### Nested Schema for `spec.nodepool.spec.remote_access`

Optional:

- `security_groups` (Set of String) Security groups for the VMs
- `ssh_key` (String) SSH key allows you to connect to your instances and gather diagnostic information if there are
  issues.

<a id="nestedblock--spec--nodepool--spec--scaling_config"></a>

### Nested Schema for `spec.nodepool.spec.scaling_config`

Optional:

- `desired_size` (Number) Desired size of nodepool
- `max_size` (Number) Maximum size of nodepool
- `min_size` (Number) Minimum size of nodepool

<a id="nestedblock--spec--nodepool--spec--taints"></a>

### Nested Schema for `spec.nodepool.spec.taints`

Optional:

- `effect` (String) Current effect state of the node pool
- `key` (String) The taint key to be applied to a node
- `value` (String) The taint value corresponding to the taint key

<a id="nestedblock--spec--nodepool--spec--update_config"></a>

### Nested Schema for `spec.nodepool.spec.update_config`

Optional:

- `max_unavailable_nodes` (String) Maximum number of nodes unavailable at once during a version update
- `max_unavailable_percentage` (String) Maximum percentage of nodes unavailable during a version update
